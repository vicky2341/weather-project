<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Weather Prediction App</title>
  <link rel="stylesheet" href="style.css">
  <style>
    .hourly {
      background: transparent;
      padding: 6px 0 18px 0;
      margin-bottom: 22px;
    }

    .hourly-grid {
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 14px;
      align-items: start;
    }

    .tile {
      background: white;
      border-radius: 12px;
      padding: 10px;
      text-align: center;
      box-shadow: 0 6px 20px rgba(2, 6, 23, 0.03);
      min-height: 96px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      gap: 6px;
    }

    .tile .time {
      font-size: 11px;
      color: #475569;
      font-weight: 600;
    }

    .tile .icon {
      height: 38px;
      width: 38px;
      display: block;
      margin-inline: auto;
    }

    .tile .temp {
      font-size: 12px;
      color: #374151;
      font-weight: 600;
    }

    .tile .icon-wrap {
      width: 48px;
      height: 48px;
      border-radius: 10px;
      background: linear-gradient(180deg, rgba(0, 0, 0, 0.02), rgba(0, 0, 0, 0));
      display: flex;
      align-items: center;
      justify-content: center;
      margin-inline: auto;
    }
  </style>
</head>

<body>

  <div class="app">
    <aside class="left" aria-label="summary">
      <div class="search" role="search">
        <input id="searchInput" type="text" placeholder="Search..." />
        <div class="pill" title="search button"></div>
      </div>

      <div class="illustration">
        <img id="weatherIcon" src="https://img.icons8.com/office/96/000000/rain.png" alt="rain illustration">
      </div>

      <div>
        <div class="temperature" id="mainTemp">6.9<sup>°C</sup></div>
        <div class="date-time" id="dateTime">Saturday, 09:30</div>
        <div class="weather-desc" id="weatherDesc">Rain, Partially Cloudy<br id="perc">Perc - 0%</div>
      </div>

      <div class="location" id="locationText">Muktinath, Dhawalagiri, Nepal</div>
    </aside>
    <main class="right" aria-label="details">

      <div class="top-row">
        <div class="tabs" role="tablist">
          <button class="active" id="tabToday">Today</button>
          <a href="project1.html"><button id="tabWeek">Week</button></a>
        </div>

        <div class="unit-toggle" role="group" aria-label="temperature unit">
          <button class="active" id="btnC">°C</button>
          <button id="btnF">°F</button>
        </div>
      </div>
      <section class="hourly" aria-label="hourly forecast">
        <div class="hourly-grid" id="hourlyGrid">

          <div class="tile">
            <div class="time">00:00 AM</div>
            <div class="icon-wrap"><img class="icon" src="https://img.icons8.com/emoji/48/000000/sun-emoji.png"
                alt="sun"></div>
            <div class="temp">6.3°C</div>
          </div>

          <div class="tile">
            <div class="time">01:00 AM</div>
            <div class="icon-wrap"><img class="icon" src="https://img.icons8.com/emoji/48/000000/sun-emoji.png"
                alt="sun"></div>
            <div class="temp">6.3°C</div>
          </div>

          <div class="tile">
            <div class="time">02:00 AM</div>
            <div class="icon-wrap"><img class="icon" src="https://img.icons8.com/color/48/rain.png" alt="rain"></div>
            <div class="temp">6.1°C</div>
          </div>

          <div class="tile">
            <div class="time">03:00 AM</div>
            <div class="icon-wrap"><img class="icon" src="https://img.icons8.com/emoji/48/000000/sun-emoji.png"
                alt="sun"></div>
            <div class="temp">6.3°C</div>
          </div>

          <div class="tile">
            <div class="time">04:00 AM</div>
            <div class="icon-wrap"><img class="icon" src="https://img.icons8.com/emoji/48/000000/sun-emoji.png"
                alt="sun"></div>
            <div class="temp">6.4°C</div>
          </div>

          <div class="tile">
            <div class="time">05:00 AM</div>
            <div class="icon-wrap"><img class="icon" src="https://img.icons8.com/color/48/rain.png" alt="rain"></div>
            <div class="temp">6.4°C</div>
          </div>

          <div class="tile">
            <div class="time">06:00 AM</div>
            <div class="icon-wrap"><img class="icon" src="https://img.icons8.com/color/48/rain.png" alt="rain"></div>
            <div class="temp">6.2°C</div>
          </div>

          <div class="tile">
            <div class="time">07:00 AM</div>
            <div class="icon-wrap"><img class="icon" src="https://img.icons8.com/color/48/partly-cloudy-day--v1.png"
                alt="partly-cloudy"></div>
            <div class="temp">6.2°C</div>
          </div>

          <div class="tile">
            <div class="time">08:00 AM</div>
            <div class="icon-wrap"><img class="icon" src="https://img.icons8.com/color/48/rain.png" alt="rain"></div>
            <div class="temp">6.6°C</div>
          </div>

          <div class="tile">
            <div class="time">09:00 AM</div>
            <div class="icon-wrap"><img class="icon" src="https://img.icons8.com/color/48/rain.png" alt="rain"></div>
            <div class="temp">6.9°C</div>
          </div>

          <div class="tile">
            <div class="time">10:00 AM</div>
            <div class="icon-wrap"><img class="icon" src="https://img.icons8.com/color/48/rain.png" alt="rain"></div>
            <div class="temp">8.0°C</div>
          </div>

          <div class="tile">
            <div class="time">11:00 AM</div>
            <div class="icon-wrap"><img class="icon" src="https://img.icons8.com/color/48/rain.png" alt="rain"></div>
            <div class="temp">9.6°C</div>
          </div>

          <div class="tile">
            <div class="time">12:00 PM</div>
            <div class="icon-wrap"><img class="icon" src="https://img.icons8.com/color/48/rain.png" alt="rain"></div>
            <div class="temp">10.9°C</div>
          </div>

          <div class="tile">
            <div class="time">01:00 PM</div>
            <div class="icon-wrap"><img class="icon" src="https://img.icons8.com/color/48/rain.png" alt="rain"></div>
            <div class="temp">11.9°C</div>
          </div>

          <div class="tile">
            <div class="time">02:00 PM</div>
            <div class="icon-wrap"><img class="icon" src="https://img.icons8.com/color/48/rain.png" alt="rain"></div>
            <div class="temp">11.2°C</div>
          </div>

          <div class="tile">
            <div class="time">03:00 PM</div>
            <div class="icon-wrap"><img class="icon" src="https://img.icons8.com/color/48/rain.png" alt="rain"></div>
            <div class="temp">10.5°C</div>
          </div>

          <div class="tile">
            <div class="time">04:00 PM</div>
            <div class="icon-wrap"><img class="icon" src="https://img.icons8.com/color/48/rain.png" alt="rain"></div>
            <div class="temp">10.4°C</div>
          </div>

          <div class="tile">
            <div class="time">05:00 PM</div>
            <div class="icon-wrap"><img class="icon" src="https://img.icons8.com/color/48/rain.png" alt="rain"></div>
            <div class="temp">9.5°C</div>
          </div>

          <div class="tile">
            <div class="time">06:00 PM</div>
            <div class="icon-wrap"><img class="icon" src="https://img.icons8.com/color/48/rain.png" alt="rain"></div>
            <div class="temp">8.8°C</div>
          </div>

          <div class="tile">
            <div class="time">07:00 PM</div>
            <div class="icon-wrap"><img class="icon" src="https://img.icons8.com/color/48/sun.png" alt="sun"></div>
            <div class="temp">8.3°C</div>
          </div>

          <div class="tile">
            <div class="time">08:00 PM</div>
            <div class="icon-wrap"><img class="icon" src="https://img.icons8.com/color/48/sun.png" alt="sun"></div>
            <div class="temp">8.0°C</div>
          </div>

          <div class="tile">
            <div class="time">09:00 PM</div>
            <div class="icon-wrap"><img class="icon" src="https://img.icons8.com/emoji/48/000000/sun-emoji.png"
                alt="sun"></div>
            <div class="temp">7.6°C</div>
          </div>

          <div class="tile">
            <div class="time">10:00 PM</div>
            <div class="icon-wrap"><img class="icon" src="https://img.icons8.com/emoji/48/000000/sun-emoji.png"
                alt="sun"></div>
            <div class="temp">7.0°C</div>
          </div>

          <div class="tile">
            <div class="time">11:00 PM</div>
            <div class="icon-wrap"><img class="icon" src="https://img.icons8.com/emoji/48/000000/sun-emoji.png"
                alt="sun"></div>
            <div class="temp">6.9°C</div>
          </div>

        </div>
      </section>
      <h3 class="highlights-title">Today's Highlights</h3>
      <div class="highlights">
        <div class="card">
          <div class="label">UV Index</div>
          <div class="value" id="uvIndex">3</div>
          <div class="sub">Moderate</div>
        </div>

        <div class="card">
          <div class="label">Wind Status</div>
          <div class="value" id="windStatus">12.2</div>
          <div class="sub">km/h</div>
        </div>

        <div class="card">
          <div class="label">Sunrise &amp; Sunset</div>
          <div class="value" id="sunTimes">05:53 am</div>
          <div class="sub">06:17 pm</div>
        </div>

        <div class="card">
          <div class="label">Humidity</div>
          <div class="value" id="humidity">83.51%</div>
          <div class="sub">High</div>
        </div>

        <div class="card">
          <div class="label">Visibility</div>
          <div class="value" id="visibility">17</div>
          <div class="sub">Very Clear Air</div>
        </div>

        <div class="card">
          <div class="label">Air Quality</div>
          <div class="value" id="airQuality">26.5</div>
          <div class="sub">Good ✌️</div>
        </div>
      </div>

      <div style="text-align:center; padding:18px 0; color:#6b7280; font-size:12px;">
        Weather Prediction App by <a href="#" style="color:#2b6ef6; text-decoration:none;">Mohan Vikram</a>
      </div>

    </main>
  </div>

  <script>


    const day = {
      temp: 28,
      conditions: "cloudy"
    };

    const isNight = false;
    let iconUrl = "";
    if (day.temp < 5) {

      iconUrl = "https://i.ibb.co/rb4rrJL/26.png";
    } else if (day.temp >= 5 && day.temp < 20) {
      if (day.conditions.toLowerCase().includes("rain")) {
        iconUrl = "https://i.ibb.co/kBd2NTS/39.png";
      } else if (day.conditions.toLowerCase().includes("cloud")) {
        iconUrl = isNight
          ? "https://i.ibb.co/Kzkk59k/15.png"
          : "https://i.ibb.co/PZQXH8V/27.png";
      } else {
        iconUrl = isNight
          ? "https://i.ibb.co/1nxNGHL/10.png"
          : "https://i.ibb.co/rb4rrJL/26.png";
      }
    } else if (day.temp >= 20 && day.temp <= 35) {
      if (day.conditions.toLowerCase().includes("cloud")) {
        iconUrl = isNight
          ? "https://i.ibb.co/Kzkk59k/15.png"
          : "https://i.ibb.co/PZQXH8V/27.png";
      } else {
        iconUrl = isNight
          ? "https://i.ibb.co/1nxNGHL/10.png"
          : "https://i.ibb.co/rb4rrJL/26.png";
      }
    } else {
      iconUrl = isNight
        ? "https://i.ibb.co/1nxNGHL/10.png"
        : "https://i.ibb.co/rb4rrJL/26.png";
    }
    document.getElementById("weatherIcon").src = iconUrl;

    let currentUnit = "C";
    let lastData = null;

    async function hi(city) {
      try {
        let response = await fetch(`https://weather.visualcrossing.com/VisualCrossingWebServices/rest/services/timeline/${city}?unitGroup=metric&key=EJ6UBL2JEQGYB3AA4ENASN62J&contentType=json`);
        let data = await response.json();
        lastData = data;
        console.log(data);


        document.getElementById('mainTemp').innerHTML = `${data.currentConditions.temp.toFixed(1)}<sup>°C</sup>`;
        document.getElementById('weatherDesc').innerHTML = `${data.currentConditions.conditions}<br>Perc - ${data.currentConditions.precip ?? 0}%`;
        document.getElementById('locationText').innerText = data.resolvedAddress;
        document.getElementById('dateTime').innerText = new Date().toLocaleString();

        document.getElementsByClassName("value")[0].innerText = data.currentConditions.uvindex ?? "--";
        document.getElementsByClassName("value")[1].innerText = data.currentConditions.windspeed ?? "--";
        document.getElementsByClassName("value")[2].innerText = data.currentConditions.sunrise ?? "--";
        document.getElementsByClassName("sub")[2].innerText = data.currentConditions.sunset ?? "--";
        document.getElementsByClassName("value")[3].innerText = data.currentConditions.humidity ?? "--";
        document.getElementsByClassName("value")[4].innerText = data.currentConditions.visibility ?? "--";
        document.getElementsByClassName("value")[5].innerText = 24.6
        let hourlyHTML = "";

        data.days[0].hours.slice(0, 24).forEach((hour, index) => {
          const hourNum = parseInt(hour.datetime.split(":")[0]);
          const isNight = hourNum < 6 || hourNum >= 18;

          let iconUrl = "";
          let bgUrl = "";

          if (hour.temp < 5) {
            iconUrl = "https://i.ibb.co/rb4rrJL/26.png";
            bgUrl = "https://i.ibb.co/qNv7NxZ/pc.webp";
          } else if (hour.temp < 20) {
            if (hour.conditions.toLowerCase().includes("rain")) {
              iconUrl = "https://i.ibb.co/kBd2NTS/39.png";
              bgUrl = "https://i.ibb.co/h2p6Yhd/rain.webp";
            } else if (hour.conditions.toLowerCase().includes("cloud")) {
              iconUrl = isNight
                ? "https://i.ibb.co/Kzkk59k/15.png"
                : "https://i.ibb.co/PZQXH8V/27.png";
              bgUrl = isNight
                ? "https://i.ibb.co/RDfPqXz/pcn.jpg"
                : "https://i.ibb.co/qNv7NxZ/pc.webp";
            } else {
              iconUrl = isNight
                ? "https://i.ibb.co/1nxNGHL/10.png"
                : "https://i.ibb.co/rb4rrJL/26.png";
              bgUrl = isNight
                ? "https://i.ibb.co/kqtZ1Gx/cn.jpg"
                : "https://i.ibb.co/WGry01m/cd.jpg";
            }
          } else if (hour.temp < 35) {
            if (hour.conditions.toLowerCase().includes("cloud")) {
              iconUrl = isNight
                ? "https://i.ibb.co/Kzkk59k/15.png"
                : "https://i.ibb.co/PZQXH8V/27.png";
              bgUrl = isNight
                ? "https://i.ibb.co/RDfPqXz/pcn.jpg"
                : "https://i.ibb.co/qNv7NxZ/pc.webp";
            } else {
              iconUrl = isNight
                ? "https://i.ibb.co/1nxNGHL/10.png"
                : "https://i.ibb.co/rb4rrJL/26.png";
              bgUrl = isNight
                ? "https://i.ibb.co/kqtZ1Gx/cn.jpg"
                : "https://i.ibb.co/WGry01m/cd.jpg";
            }
          } else {
            iconUrl = isNight
              ? "https://i.ibb.co/1nxNGHL/10.png"
              : "https://i.ibb.co/rb4rrJL/26.png";
            bgUrl = isNight
              ? "https://i.ibb.co/kqtZ1Gx/cn.jpg"
              : "https://i.ibb.co/WGry01m/cd.jpg";
          }
          if (index === 0) {
            document.querySelector(".app").style.backgroundImage = `url('${bgUrl}')`;
            document.querySelector(".app").style.backgroundSize = "cover";
            document.querySelector(".app").style.backgroundPosition = "center";
          }

          hourlyHTML += `
    <div class="tile">
      <div class="time">${hour.datetime}</div>
      <div class="icon-wrap">
        <img class="icon" src="${iconUrl}" alt="icon">
      </div>
      <div class="temp">${hour.temp.toFixed(1)}°C</div>
    </div>
  `;
        });

        document.getElementById("hourlyGrid").innerHTML = hourlyHTML;

      } catch (err) {
        console.error('fetch error', err);
      }
    }
    function cToF(c) {
      return (c * 9 / 5) + 32;
    }
    function fToC(f) {
      return (f - 32) * 5 / 9;
    }
    function convertTemp(unit) {
      if (!lastData) return;

      const mainEl = document.getElementById("mainTemp");
      const tempEls = document.querySelectorAll(".temp");

      if (unit === "F" && currentUnit === "C") {
        let mainVal = lastData.currentConditions.temp;
        mainEl.innerHTML = `${cToF(mainVal).toFixed(1)}<sup>°F</sup>`;
        lastData.days[0].hours.slice(0, 24).forEach((hour, i) => {
          tempEls[i].innerText = cToF(hour.temp).toFixed(1) + "°F";
        });

        currentUnit = "F";
      } else if (unit === "C" && currentUnit === "F") {
        mainEl.innerHTML = `${lastData.currentConditions.temp.toFixed(1)}<sup>°C</sup>`;
        lastData.days[0].hours.slice(0, 24).forEach((hour, i) => {
          tempEls[i].innerText = hour.temp.toFixed(1) + "°C";
        });

        currentUnit = "C";
      }
      document.getElementById('btnC').classList.toggle('active', unit === 'C');
      document.getElementById('btnF').classList.toggle('active', unit === 'F');
    }
    document.getElementById('btnC').addEventListener('click', () => convertTemp("C"));
    document.getElementById('btnF').addEventListener('click', () => convertTemp("F"));
    hi('kurnool');
    document.querySelector(".pill").addEventListener("click", function () {
      const city = searchInput.value.trim();
      if (city) {
        hi(`${city}`);
      }
    });
  </script>